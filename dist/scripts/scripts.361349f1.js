!function(){"use strict";var a=function(a){return a="number"==typeof a?{precision:a}:a||{},a.precision=a.precision||5,a.factor=a.factor||Math.pow(10,a.precision),a.dimension=a.dimension||2,a},b={encode:function(b,c){c=a(c);for(var d=[],e=0,f=b.length;f>e;++e){var g=b[e];if(2===c.dimension)d.push(g.lat||g[0]),d.push(g.lng||g[1]);else for(var h=0;h<c.dimension;++h)d.push(g[h])}return this.encodeDeltas(d,c)},decode:function(b,c){c=a(c);for(var d=this.decodeDeltas(b,c),e=[],f=0,g=d.length;f+(c.dimension-1)<g;){for(var h=[],i=0;i<c.dimension;++i)h.push(d[f++]);e.push(h)}return e},encodeDeltas:function(b,c){c=a(c);for(var d=[],e=0,f=b.length;f>e;)for(var g=0;g<c.dimension;++g,++e){var h=b[e],i=h-(d[g]||0);d[g]=h,b[e]=i}return this.encodeFloats(b,c)},decodeDeltas:function(b,c){c=a(c);for(var d=[],e=this.decodeFloats(b,c),f=0,g=e.length;g>f;)for(var h=0;h<c.dimension;++h,++f)e[f]=d[h]=e[f]+(d[h]||0);return e},encodeFloats:function(b,c){c=a(c);for(var d=0,e=b.length;e>d;++d)b[d]=Math.round(b[d]*c.factor);return this.encodeSignedIntegers(b)},decodeFloats:function(b,c){c=a(c);for(var d=this.decodeSignedIntegers(b),e=0,f=d.length;f>e;++e)d[e]/=c.factor;return d},encodeSignedIntegers:function(a){for(var b=0,c=a.length;c>b;++b){var d=a[b];a[b]=0>d?~(d<<1):d<<1}return this.encodeUnsignedIntegers(a)},decodeSignedIntegers:function(a){for(var b=this.decodeUnsignedIntegers(a),c=0,d=b.length;d>c;++c){var e=b[c];b[c]=1&e?~(e>>1):e>>1}return b},encodeUnsignedIntegers:function(a){for(var b="",c=0,d=a.length;d>c;++c)b+=this.encodeUnsignedInteger(a[c]);return b},decodeUnsignedIntegers:function(a){for(var b=[],c=0,d=0,e=0,f=a.length;f>e;++e){var g=a.charCodeAt(e)-63;c|=(31&g)<<d,32>g?(b.push(c),c=0,d=0):d+=5}return b},encodeSignedInteger:function(a){return a=0>a?~(a<<1):a<<1,this.encodeUnsignedInteger(a)},encodeUnsignedInteger:function(a){for(var b,c="";a>=32;)b=(32|31&a)+63,c+=String.fromCharCode(b),a>>=5;return b=a+63,c+=String.fromCharCode(b)}};if("object"==typeof module&&"object"==typeof module.exports&&(module.exports=b),"object"==typeof L){L.Polyline.prototype.fromEncoded||(L.Polyline.fromEncoded=function(a,c){return new L.Polyline(b.decode(a),c)}),L.Polygon.prototype.fromEncoded||(L.Polygon.fromEncoded=function(a,c){return new L.Polygon(b.decode(a),c)});var c={encodePath:function(){return b.encode(this.getLatLngs())}};L.Polyline.prototype.encodePath||L.Polyline.include(c),L.Polygon.prototype.encodePath||L.Polygon.include(c),L.PolylineUtil=b}}(),angular.module("ui.bootstrap",["ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.collapse"]),angular.module("ui.bootstrap.rating",[]).constant("uibRatingConfig",{max:5,stateOn:null,stateOff:null,titles:["one","two","three","four","five"]}).controller("UibRatingController",["$scope","$attrs","uibRatingConfig",function(a,b,c){var d={$setViewValue:angular.noop};this.init=function(e){d=e,d.$render=this.render,d.$formatters.push(function(a){return angular.isNumber(a)&&a<<0!==a&&(a=Math.round(a)),a}),this.stateOn=angular.isDefined(b.stateOn)?a.$parent.$eval(b.stateOn):c.stateOn,this.stateOff=angular.isDefined(b.stateOff)?a.$parent.$eval(b.stateOff):c.stateOff;var f=angular.isDefined(b.titles)?a.$parent.$eval(b.titles):c.titles;this.titles=angular.isArray(f)&&f.length>0?f:c.titles;var g=angular.isDefined(b.ratingStates)?a.$parent.$eval(b.ratingStates):new Array(angular.isDefined(b.max)?a.$parent.$eval(b.max):c.max);a.range=this.buildTemplateObjects(g)},this.buildTemplateObjects=function(a){for(var b=0,c=a.length;c>b;b++)a[b]=angular.extend({index:b},{stateOn:this.stateOn,stateOff:this.stateOff,title:this.getTitle(b)},a[b]);return a},this.getTitle=function(a){return a>=this.titles.length?a+1:this.titles[a]},a.rate=function(b){!a.readonly&&b>=0&&b<=a.range.length&&(d.$setViewValue(d.$viewValue===b?0:b),d.$render())},a.enter=function(b){a.readonly||(a.value=b),a.onHover({value:b})},a.reset=function(){a.value=d.$viewValue,a.onLeave()},a.onKeydown=function(b){/(37|38|39|40)/.test(b.which)&&(b.preventDefault(),b.stopPropagation(),a.rate(a.value+(38===b.which||39===b.which?1:-1)))},this.render=function(){a.value=d.$viewValue}}]).directive("uibRating",function(){return{require:["uibRating","ngModel"],scope:{readonly:"=?",onHover:"&",onLeave:"&"},controller:"UibRatingController",templateUrl:"template/rating/rating.html",replace:!0,link:function(a,b,c,d){var e=d[0],f=d[1];e.init(f)}}}),angular.module("ui.bootstrap.rating").value("$ratingSuppressWarning",!1).controller("RatingController",["$scope","$attrs","$controller","$log","$ratingSuppressWarning",function(a,b,c,d,e){e||d.warn("RatingController is now deprecated. Use UibRatingController instead."),angular.extend(this,c("UibRatingController",{$scope:a,$attrs:b}))}]).directive("rating",["$log","$ratingSuppressWarning",function(a,b){return{require:["rating","ngModel"],scope:{readonly:"=?",onHover:"&",onLeave:"&"},controller:"RatingController",templateUrl:"template/rating/rating.html",replace:!0,link:function(c,d,e,f){b||a.warn("rating is now deprecated. Use uib-rating instead.");var g=f[0],h=f[1];g.init(h)}}}]),angular.module("ui.bootstrap.tabs",[]).controller("UibTabsetController",["$scope",function(a){var b=this,c=b.tabs=a.tabs=[];b.select=function(a){angular.forEach(c,function(b){b.active&&b!==a&&(b.active=!1,b.onDeselect(),a.selectCalled=!1)}),a.active=!0,a.selectCalled||(a.onSelect(),a.selectCalled=!0)},b.addTab=function(a){c.push(a),1===c.length&&a.active!==!1?a.active=!0:a.active?b.select(a):a.active=!1},b.removeTab=function(a){var e=c.indexOf(a);if(a.active&&c.length>1&&!d){var f=e==c.length-1?e-1:e+1;b.select(c[f])}c.splice(e,1)};var d;a.$on("$destroy",function(){d=!0})}]).directive("uibTabset",function(){return{restrict:"EA",transclude:!0,replace:!0,scope:{type:"@"},controller:"UibTabsetController",templateUrl:"template/tabs/tabset.html",link:function(a,b,c){a.vertical=angular.isDefined(c.vertical)?a.$parent.$eval(c.vertical):!1,a.justified=angular.isDefined(c.justified)?a.$parent.$eval(c.justified):!1}}}).directive("uibTab",["$parse",function(a){return{require:"^uibTabset",restrict:"EA",replace:!0,templateUrl:"template/tabs/tab.html",transclude:!0,scope:{active:"=?",heading:"@",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},link:function(b,c,d,e,f){b.$watch("active",function(a){a&&e.select(b)}),b.disabled=!1,d.disable&&b.$parent.$watch(a(d.disable),function(a){b.disabled=!!a}),b.select=function(){b.disabled||(b.active=!0)},e.addTab(b),b.$on("$destroy",function(){e.removeTab(b)}),b.$transcludeFn=f}}}]).directive("uibTabHeadingTransclude",function(){return{restrict:"A",require:["?^uibTab","?^tab"],link:function(a,b){a.$watch("headingElement",function(a){a&&(b.html(""),b.append(a))})}}}).directive("uibTabContentTransclude",function(){function a(a){return a.tagName&&(a.hasAttribute("tab-heading")||a.hasAttribute("data-tab-heading")||a.hasAttribute("x-tab-heading")||a.hasAttribute("uib-tab-heading")||a.hasAttribute("data-uib-tab-heading")||a.hasAttribute("x-uib-tab-heading")||"tab-heading"===a.tagName.toLowerCase()||"data-tab-heading"===a.tagName.toLowerCase()||"x-tab-heading"===a.tagName.toLowerCase()||"uib-tab-heading"===a.tagName.toLowerCase()||"data-uib-tab-heading"===a.tagName.toLowerCase()||"x-uib-tab-heading"===a.tagName.toLowerCase())}return{restrict:"A",require:["?^uibTabset","?^tabset"],link:function(b,c,d){var e=b.$eval(d.uibTabContentTransclude);e.$transcludeFn(e.$parent,function(b){angular.forEach(b,function(b){a(b)?e.headingElement=b:c.append(b)})})}}}),angular.module("ui.bootstrap.tabs").value("$tabsSuppressWarning",!1).controller("TabsetController",["$scope","$controller","$log","$tabsSuppressWarning",function(a,b,c,d){d||c.warn("TabsetController is now deprecated. Use UibTabsetController instead."),angular.extend(this,b("UibTabsetController",{$scope:a}))}]).directive("tabset",["$log","$tabsSuppressWarning",function(a,b){return{restrict:"EA",transclude:!0,replace:!0,scope:{type:"@"},controller:"TabsetController",templateUrl:"template/tabs/tabset.html",link:function(c,d,e){b||a.warn("tabset is now deprecated. Use uib-tabset instead."),c.vertical=angular.isDefined(e.vertical)?c.$parent.$eval(e.vertical):!1,c.justified=angular.isDefined(e.justified)?c.$parent.$eval(e.justified):!1}}}]).directive("tab",["$parse","$log","$tabsSuppressWarning",function(a,b,c){return{require:"^tabset",restrict:"EA",replace:!0,templateUrl:"template/tabs/tab.html",transclude:!0,scope:{active:"=?",heading:"@",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},link:function(d,e,f,g,h){c||b.warn("tab is now deprecated. Use uib-tab instead."),d.$watch("active",function(a){a&&g.select(d)}),d.disabled=!1,f.disable&&d.$parent.$watch(a(f.disable),function(a){d.disabled=!!a}),d.select=function(){d.disabled||(d.active=!0)},g.addTab(d),d.$on("$destroy",function(){g.removeTab(d)}),d.$transcludeFn=h}}}]).directive("tabHeadingTransclude",["$log","$tabsSuppressWarning",function(a,b){return{restrict:"A",require:"^tab",link:function(c,d){b||a.warn("tab-heading-transclude is now deprecated. Use uib-tab-heading-transclude instead."),c.$watch("headingElement",function(a){a&&(d.html(""),d.append(a))})}}}]).directive("tabContentTransclude",["$log","$tabsSuppressWarning",function(a,b){function c(a){return a.tagName&&(a.hasAttribute("tab-heading")||a.hasAttribute("data-tab-heading")||a.hasAttribute("x-tab-heading")||"tab-heading"===a.tagName.toLowerCase()||"data-tab-heading"===a.tagName.toLowerCase()||"x-tab-heading"===a.tagName.toLowerCase())}return{restrict:"A",require:"^tabset",link:function(d,e,f){b||a.warn("tab-content-transclude is now deprecated. Use uib-tab-content-transclude instead.");var g=d.$eval(f.tabContentTransclude);g.$transcludeFn(g.$parent,function(a){angular.forEach(a,function(a){c(a)?g.headingElement=a:e.append(a)})})}}}]),angular.module("ui.bootstrap.collapse",[]).directive("uibCollapse",["$animate","$injector",function(a,b){var c=b.has("$animateCss")?b.get("$animateCss"):null;return{link:function(b,d,e){function f(){d.removeClass("collapse").addClass("collapsing").attr("aria-expanded",!0).attr("aria-hidden",!1),c?c(d,{addClass:"in",easing:"ease",to:{height:d[0].scrollHeight+"px"}}).start()["finally"](g):a.addClass(d,"in",{to:{height:d[0].scrollHeight+"px"}}).then(g)}function g(){d.removeClass("collapsing").addClass("collapse").css({height:"auto"})}function h(){return d.hasClass("collapse")||d.hasClass("in")?(d.css({height:d[0].scrollHeight+"px"}).removeClass("collapse").addClass("collapsing").attr("aria-expanded",!1).attr("aria-hidden",!0),void(c?c(d,{removeClass:"in",to:{height:"0"}}).start()["finally"](i):a.removeClass(d,"in",{to:{height:"0"}}).then(i))):i()}function i(){d.css({height:"0"}),d.removeClass("collapsing").addClass("collapse")}b.$watch(e.uibCollapse,function(a){a?h():f()})}}}]),angular.module("ui.bootstrap.collapse").value("$collapseSuppressWarning",!1).directive("collapse",["$animate","$injector","$log","$collapseSuppressWarning",function(a,b,c,d){var e=b.has("$animateCss")?b.get("$animateCss"):null;return{link:function(b,f,g){function h(){f.removeClass("collapse").addClass("collapsing").attr("aria-expanded",!0).attr("aria-hidden",!1),e?e(f,{easing:"ease",to:{height:f[0].scrollHeight+"px"}}).start().done(i):a.animate(f,{},{height:f[0].scrollHeight+"px"}).then(i)}function i(){f.removeClass("collapsing").addClass("collapse in").css({height:"auto"})}function j(){return f.hasClass("collapse")||f.hasClass("in")?(f.css({height:f[0].scrollHeight+"px"}).removeClass("collapse in").addClass("collapsing").attr("aria-expanded",!1).attr("aria-hidden",!0),void(e?e(f,{to:{height:"0"}}).start().done(k):a.animate(f,{},{height:"0"}).then(k))):k()}function k(){f.css({height:"0"}),f.removeClass("collapsing").addClass("collapse")}d||c.warn("collapse is now deprecated. Use uib-collapse instead."),b.$watch(g.collapse,function(a){a?j():h()})}}}]),angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.collapse"]),angular.module("ui.bootstrap.tpls",["template/rating/rating.html","template/tabs/tab.html","template/tabs/tabset.html"]),angular.module("ui.bootstrap.rating",[]).constant("uibRatingConfig",{max:5,stateOn:null,stateOff:null,titles:["one","two","three","four","five"]}).controller("UibRatingController",["$scope","$attrs","uibRatingConfig",function(a,b,c){var d={$setViewValue:angular.noop};this.init=function(e){d=e,d.$render=this.render,d.$formatters.push(function(a){return angular.isNumber(a)&&a<<0!==a&&(a=Math.round(a)),a}),this.stateOn=angular.isDefined(b.stateOn)?a.$parent.$eval(b.stateOn):c.stateOn,this.stateOff=angular.isDefined(b.stateOff)?a.$parent.$eval(b.stateOff):c.stateOff;var f=angular.isDefined(b.titles)?a.$parent.$eval(b.titles):c.titles;this.titles=angular.isArray(f)&&f.length>0?f:c.titles;var g=angular.isDefined(b.ratingStates)?a.$parent.$eval(b.ratingStates):new Array(angular.isDefined(b.max)?a.$parent.$eval(b.max):c.max);a.range=this.buildTemplateObjects(g)},this.buildTemplateObjects=function(a){for(var b=0,c=a.length;c>b;b++)a[b]=angular.extend({index:b},{stateOn:this.stateOn,stateOff:this.stateOff,title:this.getTitle(b)},a[b]);return a},this.getTitle=function(a){return a>=this.titles.length?a+1:this.titles[a]},a.rate=function(b){!a.readonly&&b>=0&&b<=a.range.length&&(d.$setViewValue(d.$viewValue===b?0:b),d.$render())},a.enter=function(b){a.readonly||(a.value=b),a.onHover({value:b})},a.reset=function(){a.value=d.$viewValue,a.onLeave()},a.onKeydown=function(b){/(37|38|39|40)/.test(b.which)&&(b.preventDefault(),b.stopPropagation(),a.rate(a.value+(38===b.which||39===b.which?1:-1)))},this.render=function(){a.value=d.$viewValue}}]).directive("uibRating",function(){return{require:["uibRating","ngModel"],scope:{readonly:"=?",onHover:"&",onLeave:"&"},controller:"UibRatingController",templateUrl:"template/rating/rating.html",replace:!0,link:function(a,b,c,d){var e=d[0],f=d[1];e.init(f)}}}),angular.module("ui.bootstrap.rating").value("$ratingSuppressWarning",!1).controller("RatingController",["$scope","$attrs","$controller","$log","$ratingSuppressWarning",function(a,b,c,d,e){e||d.warn("RatingController is now deprecated. Use UibRatingController instead."),angular.extend(this,c("UibRatingController",{$scope:a,$attrs:b}))}]).directive("rating",["$log","$ratingSuppressWarning",function(a,b){return{require:["rating","ngModel"],scope:{readonly:"=?",onHover:"&",onLeave:"&"},controller:"RatingController",templateUrl:"template/rating/rating.html",replace:!0,link:function(c,d,e,f){b||a.warn("rating is now deprecated. Use uib-rating instead.");var g=f[0],h=f[1];g.init(h)}}}]),angular.module("ui.bootstrap.tabs",[]).controller("UibTabsetController",["$scope",function(a){var b=this,c=b.tabs=a.tabs=[];b.select=function(a){angular.forEach(c,function(b){b.active&&b!==a&&(b.active=!1,b.onDeselect(),a.selectCalled=!1)}),a.active=!0,a.selectCalled||(a.onSelect(),a.selectCalled=!0)},b.addTab=function(a){c.push(a),1===c.length&&a.active!==!1?a.active=!0:a.active?b.select(a):a.active=!1},b.removeTab=function(a){var e=c.indexOf(a);if(a.active&&c.length>1&&!d){var f=e==c.length-1?e-1:e+1;b.select(c[f])}c.splice(e,1)};var d;a.$on("$destroy",function(){d=!0})}]).directive("uibTabset",function(){return{restrict:"EA",transclude:!0,replace:!0,scope:{type:"@"},controller:"UibTabsetController",templateUrl:"template/tabs/tabset.html",link:function(a,b,c){a.vertical=angular.isDefined(c.vertical)?a.$parent.$eval(c.vertical):!1,a.justified=angular.isDefined(c.justified)?a.$parent.$eval(c.justified):!1}}}).directive("uibTab",["$parse",function(a){return{require:"^uibTabset",restrict:"EA",replace:!0,templateUrl:"template/tabs/tab.html",transclude:!0,scope:{active:"=?",heading:"@",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},link:function(b,c,d,e,f){b.$watch("active",function(a){a&&e.select(b)}),b.disabled=!1,d.disable&&b.$parent.$watch(a(d.disable),function(a){b.disabled=!!a}),b.select=function(){b.disabled||(b.active=!0)},e.addTab(b),b.$on("$destroy",function(){e.removeTab(b)}),b.$transcludeFn=f}}}]).directive("uibTabHeadingTransclude",function(){return{restrict:"A",require:["?^uibTab","?^tab"],link:function(a,b){a.$watch("headingElement",function(a){a&&(b.html(""),b.append(a))})}}}).directive("uibTabContentTransclude",function(){function a(a){return a.tagName&&(a.hasAttribute("tab-heading")||a.hasAttribute("data-tab-heading")||a.hasAttribute("x-tab-heading")||a.hasAttribute("uib-tab-heading")||a.hasAttribute("data-uib-tab-heading")||a.hasAttribute("x-uib-tab-heading")||"tab-heading"===a.tagName.toLowerCase()||"data-tab-heading"===a.tagName.toLowerCase()||"x-tab-heading"===a.tagName.toLowerCase()||"uib-tab-heading"===a.tagName.toLowerCase()||"data-uib-tab-heading"===a.tagName.toLowerCase()||"x-uib-tab-heading"===a.tagName.toLowerCase())}return{restrict:"A",require:["?^uibTabset","?^tabset"],link:function(b,c,d){var e=b.$eval(d.uibTabContentTransclude);e.$transcludeFn(e.$parent,function(b){angular.forEach(b,function(b){a(b)?e.headingElement=b:c.append(b)})})}}}),angular.module("ui.bootstrap.tabs").value("$tabsSuppressWarning",!1).controller("TabsetController",["$scope","$controller","$log","$tabsSuppressWarning",function(a,b,c,d){d||c.warn("TabsetController is now deprecated. Use UibTabsetController instead."),angular.extend(this,b("UibTabsetController",{$scope:a}))}]).directive("tabset",["$log","$tabsSuppressWarning",function(a,b){return{restrict:"EA",transclude:!0,replace:!0,scope:{type:"@"},controller:"TabsetController",templateUrl:"template/tabs/tabset.html",link:function(c,d,e){b||a.warn("tabset is now deprecated. Use uib-tabset instead."),c.vertical=angular.isDefined(e.vertical)?c.$parent.$eval(e.vertical):!1,c.justified=angular.isDefined(e.justified)?c.$parent.$eval(e.justified):!1}}}]).directive("tab",["$parse","$log","$tabsSuppressWarning",function(a,b,c){return{require:"^tabset",restrict:"EA",replace:!0,templateUrl:"template/tabs/tab.html",transclude:!0,scope:{active:"=?",heading:"@",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},link:function(d,e,f,g,h){c||b.warn("tab is now deprecated. Use uib-tab instead."),d.$watch("active",function(a){a&&g.select(d)}),d.disabled=!1,f.disable&&d.$parent.$watch(a(f.disable),function(a){d.disabled=!!a}),d.select=function(){d.disabled||(d.active=!0)},g.addTab(d),d.$on("$destroy",function(){g.removeTab(d)}),d.$transcludeFn=h}}}]).directive("tabHeadingTransclude",["$log","$tabsSuppressWarning",function(a,b){return{restrict:"A",require:"^tab",link:function(c,d){b||a.warn("tab-heading-transclude is now deprecated. Use uib-tab-heading-transclude instead."),c.$watch("headingElement",function(a){a&&(d.html(""),d.append(a))})}}}]).directive("tabContentTransclude",["$log","$tabsSuppressWarning",function(a,b){function c(a){return a.tagName&&(a.hasAttribute("tab-heading")||a.hasAttribute("data-tab-heading")||a.hasAttribute("x-tab-heading")||"tab-heading"===a.tagName.toLowerCase()||"data-tab-heading"===a.tagName.toLowerCase()||"x-tab-heading"===a.tagName.toLowerCase())}return{restrict:"A",require:"^tabset",link:function(d,e,f){b||a.warn("tab-content-transclude is now deprecated. Use uib-tab-content-transclude instead.");var g=d.$eval(f.tabContentTransclude);g.$transcludeFn(g.$parent,function(a){angular.forEach(a,function(a){c(a)?g.headingElement=a:e.append(a)})})}}}]),angular.module("ui.bootstrap.collapse",[]).directive("uibCollapse",["$animate","$injector",function(a,b){var c=b.has("$animateCss")?b.get("$animateCss"):null;return{link:function(b,d,e){function f(){d.removeClass("collapse").addClass("collapsing").attr("aria-expanded",!0).attr("aria-hidden",!1),c?c(d,{addClass:"in",easing:"ease",to:{height:d[0].scrollHeight+"px"}}).start()["finally"](g):a.addClass(d,"in",{to:{height:d[0].scrollHeight+"px"}}).then(g)}function g(){d.removeClass("collapsing").addClass("collapse").css({height:"auto"})}function h(){return d.hasClass("collapse")||d.hasClass("in")?(d.css({height:d[0].scrollHeight+"px"}).removeClass("collapse").addClass("collapsing").attr("aria-expanded",!1).attr("aria-hidden",!0),void(c?c(d,{removeClass:"in",to:{height:"0"}}).start()["finally"](i):a.removeClass(d,"in",{to:{height:"0"}}).then(i))):i()}function i(){d.css({height:"0"}),d.removeClass("collapsing").addClass("collapse")}b.$watch(e.uibCollapse,function(a){a?h():f()})}}}]),angular.module("ui.bootstrap.collapse").value("$collapseSuppressWarning",!1).directive("collapse",["$animate","$injector","$log","$collapseSuppressWarning",function(a,b,c,d){var e=b.has("$animateCss")?b.get("$animateCss"):null;return{link:function(b,f,g){function h(){f.removeClass("collapse").addClass("collapsing").attr("aria-expanded",!0).attr("aria-hidden",!1),e?e(f,{easing:"ease",to:{height:f[0].scrollHeight+"px"}}).start().done(i):a.animate(f,{},{height:f[0].scrollHeight+"px"}).then(i)}function i(){f.removeClass("collapsing").addClass("collapse in").css({height:"auto"})}function j(){return f.hasClass("collapse")||f.hasClass("in")?(f.css({height:f[0].scrollHeight+"px"}).removeClass("collapse in").addClass("collapsing").attr("aria-expanded",!1).attr("aria-hidden",!0),void(e?e(f,{to:{height:"0"}}).start().done(k):a.animate(f,{},{height:"0"}).then(k))):k()}function k(){f.css({height:"0"}),f.removeClass("collapsing").addClass("collapse")}d||c.warn("collapse is now deprecated. Use uib-collapse instead."),b.$watch(g.collapse,function(a){a?j():h()})}}}]),angular.module("template/rating/rating.html",[]).run(["$templateCache",function(a){a.put("template/rating/rating.html",'<span ng-mouseleave="reset()" ng-keydown="onKeydown($event)" tabindex="0" role="slider" aria-valuemin="0" aria-valuemax="{{range.length}}" aria-valuenow="{{value}}">\n    <span ng-repeat-start="r in range track by $index" class="sr-only">({{ $index < value ? \'*\' : \' \' }})</span>\n    <i ng-repeat-end ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="fa" ng-class="$index < value && (r.stateOn || \'fa-star\') || (r.stateOff || \'fa-star-o\')" ng-attr-title="{{r.title}}" aria-valuetext="{{r.title}}"></i>\n</span>\n')}]),angular.module("template/tabs/tab.html",[]).run(["$templateCache",function(a){a.put("template/tabs/tab.html",'<li ng-class="{active: active, disabled: disabled}">\n  <a href ng-click="select()" uib-tab-heading-transclude>{{heading}}</a>\n</li>\n')}]),angular.module("template/tabs/tabset.html",[]).run(["$templateCache",function(a){a.put("template/tabs/tabset.html",'<div>\n  <ul class="nav nav-{{type || \'tabs\'}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n  <div class="tab-content">\n    <div class="tab-pane" \n         ng-repeat="tab in tabs" \n         ng-class="{active: tab.active}"\n         uib-tab-content-transclude="tab">\n    </div>\n  </div>\n</div>\n')}]),angular.module("doctorpricerWebApp",["ngAnimate","ngResource","ngRoute","ngTouch","ngAutocomplete","ngDialog","leaflet-directive","duScroll","ui.router","ui.bootstrap.showErrors","ui.bootstrap"]).run(["$rootScope","ngDialog",function(a,b){var c=FastClick.prototype.needsClick;FastClick.prototype.needsClick=function(a){return(a.className||"").indexOf("pac-item")>-1?!0:(a.parentNode.className||"").indexOf("pac-item")>-1?!0:c.apply(this,arguments)},FastClick.attach(document.body),a.title="DoctorPricer",a.apiUrl="https://api2.doctorpricer.co.nz",a.openDialog=function(){b.open({template:"views/info.html"})}}]).config(["$stateProvider","$urlRouterProvider",function(a,b){b.otherwise("/"),a.state("home",{url:"/",templateUrl:"views/main.html",controller:"MainCtrl",onEnter:["$rootScope",function(a){a.hideFb=!1,a.autocompleteSize="big-autocomplete"}]}).state("result",{url:"/:lat,:lng/:age/",templateUrl:"views/result.html",controller:"ResultCtrl",resolve:{practices:["$state","$stateParams","PracticesCollection",function(a,b,c){return isNaN(parseFloat(b.lat))||isNaN(parseFloat(b.lng))||isNaN(parseInt(b.age))?0:c.fetchData(b.lat,b.lng,b.age)}]},onEnter:["$window","$stateParams","$rootScope","SearchModel","PracticesCollection",function(a,b,c,d){window.innerWidth<=481&&(c.hideFb=!0),d.coords=[parseFloat(b.lat),parseFloat(b.lng)],d.age=b.age,c.$broadcast("newSearch"),c.autocompleteSize="small-autocomplete"}]})}]),angular.module("doctorpricerWebApp").directive("addressValidation",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){d.$validators.addressValidation=function(b){return d.$isEmpty(b)?!1:a.details.autocomplete===a.autocomplete&&a.details.geometry?!0:!1}}}}).directive("autoScroll",["PracticesCollection",function(a){return{restrict:"A",link:function(b,c){b.$on("updateScroll",function(){var b=angular.element(c[0]),d=angular.element(document.getElementById("practice_"+a.selectedPractice));b.duScrollTo(d,0,250)})}}}]).directive("loadingButton",["$timeout",function(){return{replace:"true",require:"^form",template:'<span><span ng-hide="!isLoading"><i class="fa fa-spinner fa-spin fa-lg"></i></span><button ng-hide="isLoading" type="submit" class="btn btn-cool {{btnSize}}"><span class="glyphicon glyphicon-search" aria-hidden="true"></span> Search</button></span>',link:function(a,b,c,d){a.btnSize=c.btnSize,a.$on("newSearch",function(){a.isLoading=!1}),b.bind("click",function(){a.isLoading=d.$invalid?!1:!0})}}}]).directive("disableTap",["$timeout",function(a){return{link:function(){a(function(){var a=document.getElementsByClassName("pac-container");angular.element(a).attr("data-tap-disabled","true")},500)}}}]),angular.module("doctorpricerWebApp").controller("MainCtrl",["$scope","$rootScope","$window","$state","$timeout",function(a,b,c,d,e){a.options={country:"nz"},a.error="",a.details={},a.addressPlaceholder=c.outerWidth>545?"Start typing an address":"Address",a.$watch("details",function(){e(function(){a.details.autocomplete=a.autocomplete},200)}),a.next=function(){return a.$broadcast("show-errors-check-validity"),!a.details.geometry||a.form.$invalid?void(a.isLoading=!1):(a.error="",void d.go("result",{age:a.age,lat:a.details.geometry.location.lat(),lng:a.details.geometry.location.lng()}).then(function(){},function(){a.error="Something's broken :( Try again later.",a.isLoading=!1}))}}]),angular.module("doctorpricerWebApp").controller("ResultCtrl",["$scope","$timeout","$rootScope","$window","$state","practices","ngDialog","leafletData","PracticesCollection","SearchModel",function(a,b,c,d,e,f,g,h,i,j){0===f&&e.go("home"),a.sidebar=1,a.reviewCount=0,a.practices=i.displayCollection,a.christchurch=j.christchurch,a.userAddress=j.address,a.map={active:!0},a.radiuses=[],a.reportModal=function(){g.open({template:"views/report.html",controller:["$scope","$http",function(a,b){a.status=null,a.sending=!1,a.submitForm=function(){a.sending=!0,a.status="Sending...",b.get(c.apiUrl+"/contact",{params:a.form}).success(function(){a.status="Message sent."}).error(function(){a.status="Error sending message, try emailing doctorpricernz@gmail.com instead."})}}]})},a.toggleSidebar=function(){a.sidebar=!a.sidebar},a.changeRadius=function(b){i.displayCollection=a.radiuses[b].practices,a.practices=i.displayCollection,a.thisPractice={},a.map.active=!0,c.$broadcast("countUpdated")},a.reloadMap=function(){void 0!==i.selectedPractice&&c.$broadcast("changePractice")},a.navPractice=function(b,d){i.selectedPractice=b,a.thisPractice=a.practices[b],a.map.active&&d&&c.$broadcast("changePractice"),a.thisPractice.google||i.getGoogle(b).then(function(a){i.displayCollection[b].google=a,i.displayCollection[b].reviewCount="("+(a.reviews?a.reviews.length:0).toString()+")"})},a.isActive=function(a){return a===i.selectedPractice};var k=function(){b(function(){var a=d.innerHeight-148+"px";document.getElementById("practice-list").style.maxHeight=a,document.getElementById("reviews").style.maxHeight=a},300)},l=angular.element(d);l.bind("resize",function(){i.screenHeight=d.innerHeight,k()}),a.$on("countUpdated",function(){a.noPractices=0===i.displayCollection.length?1:0}),a.$on("newSearch",function(){a.map.active=!0,ga("send","pageview","/results.php?address="+j.address+"&age="+j.age),a.radiuses=[{key:0,name:"2km",distance:2e3,practices:[]},{key:1,name:"5km",distance:5e3,practices:[]},{key:2,name:"10km",distance:1e4,practices:[]},{key:3,name:"30km",distance:3e4,practices:[]},{key:4,name:"60km",distance:6e4,practices:[]}];for(var b=0;b<a.radiuses.length;b++)for(var d=a.radiuses[b].distance,e=0;e<i.collection.length;e++){var f=i.collection[e].distance;if(f>d)break;a.radiuses[b].practices.push(i.collection[e])}for(var b=a.radiuses.length-1;b>=0;b--)(0===a.radiuses[b].practices.length||b>0&&a.radiuses[b].practices.length===a.radiuses[b-1].practices.length)&&a.radiuses.splice(b,1);a.selectedRadius=a.radiuses[0],j.initalizeModel(j.coords[0],j.coords[1],j.age,function(){a.changeRadius(0),c.$apply(function(){c.title="DoctorPricer - "+j.displayAddress}),a.christchurch=j.christchurch,a.userAddress=j.address,k()},function(){console.log("calculating address failed")})}),k(),c.$broadcast("newSearch")}]),angular.module("doctorpricerWebApp").controller("NavbarCtrl",["$scope","$rootScope","$location","$state","$timeout","ngDialog","SearchModel",function(a,b,c,d,e,f,g){a.age=g.age,a.autocomplete=g.displayAddress,a.options={country:"nz"},a.details={},a.isCollapsed=1,a.$on("$stateChangeSuccess",function(b,c){a.navbarThings="result"===c.name?1:0}),a.$watch("details",function(){e(function(){a.details.autocomplete=a.autocomplete},200)}),a.$on("geolocatedAddress",function(){a.age=g.age,a.autocomplete=g.displayAddress,a.details.autocomplete=a.autocomplete}),a.next=function(){if(a.details.geometry){if(a.$broadcast("show-errors-check-validity"),a.headerForm.$invalid)return;document.getElementById("practice-list").style.maxHeight=0}d.transitionTo("result",{age:a.age,lat:a.details.geometry?a.details.geometry.location.lat():g.coords[0],lng:a.details.geometry?a.details.geometry.location.lng():g.coords[1]},{location:!0,inherit:!0,notify:!1})}}]),angular.module("doctorpricerWebApp").controller("MapCtrl",["$scope","$timeout","$rootScope","$window","leafletData","PracticesCollection","SearchModel",function(a,b,c,d,e,f,g){var h,i=new google.maps.DirectionsService,j=angular.element(d),k=function(){b(function(){var a=d.innerHeight-148+"px";document.getElementById("leaflet_map").style.height=a,document.getElementById("map_canvas").style.maxHeight=a},300)};j.bind("resize",function(){k()}),a.$on("countUpdated",function(){m()}),a.$on("changePractice",function(){o(),n(function(){f.displayCollection[f.selectedPractice].marker.openPopup()}),a.toggleSidebar()});var l=function(b,d){a.navPractice(d,!1),o(),c.$broadcast("updateScroll")},m=function(){if(0!==f.displayCollection.length){k();var c=[];a.paths={};var d=[],i=L.marker([g.coords[0],g.coords[1]],{title:"You",icon:p.markerBlue});d.push(i),c.push([g.coords[0],g.coords[1]]),angular.forEach(f.displayCollection,function(a,b){c.push([a.lat,a.lng]);var e=L.marker([parseFloat(a.lat),parseFloat(a.lng)],{title:a.name,icon:p.markerRed});e.bindPopup('<h5><a href="'+a.url+'" target="_blank">'+a.name+"</a><br><small>"+a.pho+"</small></h5>"),e.on("click",function(){l(e,b)}),f.displayCollection[b].marker=e,d.push(e)});var j=L.latLngBounds(c);b(function(){e.getMap().then(function(a){h&&a.removeLayer(h),h=L.featureGroup(d),a.addLayer(h),a.invalidateSize(),a.fitBounds(j,{padding:[80,80]})})},300)}},n=function(a){e.getMap().then(function(b){var c=L.latLngBounds([f.displayCollection[f.selectedPractice].lat,f.displayCollection[f.selectedPractice].lng],[g.coords[0],g.coords[1]]);b.fitBounds(c,{padding:[60,60]}),a()})},o=function(){var b=new google.maps.LatLng(f.displayCollection[f.selectedPractice].lat,f.displayCollection[f.selectedPractice].lng),c=new google.maps.LatLng(g.coords[0],g.coords[1]),d={origin:c,destination:b,travelMode:google.maps.TravelMode.DRIVING,unitSystem:google.maps.UnitSystem.METRIC,optimizeWaypoints:!0};i.route(d,function(b,c){if(c===google.maps.DirectionsStatus.OK){var d=L.Polyline.fromEncoded(b.routes[0].overview_polyline).getLatLngs();a.paths.p1={color:"#387ef5",weight:6,latlngs:d,type:"polyline"}
}else console.log("Error when fetching route: "+c)})};angular.extend(a,{center:{lat:0,lng:0,zoom:10},paths:{},scrollWheelZoom:!1,layers:{baselayers:{osm:{name:"MapBox",url:"https://api.mapbox.com/v4/mapbox.streets/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoiZnJhc2VydGhvbXBzb24iLCJhIjoiY2llcnF2ZXlhMDF0cncwa21yY2tyZjB5aCJ9.iVxJbdbZiWVfHItWtZfKPQ",type:"xyz",layerOptions:{attribution:'<a href="http://www.mapbox.com/about/maps/" target="_blank">Terms &amp; Feedback</a>'}}}}});var p={markerBlue:L.AwesomeMarkers.icon({prefix:"glyphicon",icon:"glyphicon-home",markerColor:"blue"}),markerRed:L.AwesomeMarkers.icon({prefix:"fa",icon:"fa-user-md",markerColor:"red"})}}]),angular.module("doctorpricerWebApp").service("PracticesCollection",["$window","$q","$http","$timeout","$rootScope",function(a,b,c,d,e){var f=new google.maps.places.PlacesService(document.createElement("div")),g=this;this.length=0,this.lastPractice=void 0,this.displayCollection=[],this.selectedPractice=void 0,this.christchurch=!1,this.getPlaceId=function(a,c){var d=b.defer();if(null==a){var e=g.displayCollection[c].name,h=g.displayCollection[c].lat,i=g.displayCollection[c].lng,j={query:e,radius:.5,location:new google.maps.LatLng(h,i)};f.textSearch(j,function(a,b){b==google.maps.places.PlacesServiceStatus.OK?d.resolve(a[0].place_id):(console.log("error finding place"),d.reject())})}else d.resolve();return d.promise},this.getGoogle=function(a){var c=b.defer(),d=g.displayCollection[a].place_id||null;return g.getPlaceId(d,a).then(function(a){a&&(d=a),f.getDetails({placeId:d},function(a,b){b==google.maps.places.PlacesServiceStatus.OK?c.resolve(a):(console.log("error fetching place details"),c.reject())})}),c.promise},this.fetchData=function(a,f,h){var i=b.defer();return d(function(){i.reject()},15e3),c.get(e.apiUrl+"/dp/api/practices?lat="+a+"&lng="+f+"&age="+h+"&sort=1").success(function(a){g.collection=a,i.resolve()}).error(function(){i.reject()}),i.promise}}]),angular.module("doctorpricerWebApp").service("SearchModel",["$rootScope",function(a){var b=this;this.address="None",this.displayAddress="Address",this.age=0,this.coords=[],this.initalizeModel=function(c,d,e,f,g){this.age=e,this.coords=[c,d];{var h=new google.maps.Geocoder,i=new google.maps.LatLng(c,d);h.geocode({latLng:i},function(c,d){d===google.maps.GeocoderStatus.OK?(b.christchurch=c[0].formatted_address.indexOf("Christchurch")>-1?!0:!1,b.address=c[0].address_components[0].short_name+" "+c[0].address_components[1].short_name+", "+c[0].address_components[2].short_name,b.displayAddress=c[0].address_components[0].short_name+" "+c[0].address_components[1].short_name,a.$broadcast("geolocatedAddress"),f()):g("Error geocoding input address.")})}}}]);